<!DOCTYPE html>
<html lang="et">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
    <title>Reisi checklist</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>‚úàÔ∏è</text></svg>">

    <meta name="theme-color" content="#667eea">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Reisi checklist">

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html, body {
            height: 100%;
            overflow: hidden;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        .container {
            max-width: 500px;
            height: 100%;
            margin: 0 auto;
            background: white;
            display: flex;
            flex-direction: column;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            text-align: center;
            flex-shrink: 0;
        }

        .lang-toggle {
            display: inline-block;
            background: rgba(255,255,255,0.2);
            border: 2px solid white;
            color: white;
            padding: 6px 12px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            margin-bottom: 10px;
        }

        h1 {
            font-size: 24px;
            margin-bottom: 8px;
            font-weight: 600;
        }

        .progress {
            background: rgba(255,255,255,0.3);
            border-radius: 10px;
            height: 8px;
            overflow: hidden;
            margin-top: 10px;
        }

        .progress-bar {
            background: white;
            height: 100%;
            width: 0%;
            transition: width 0.3s ease;
        }

        .progress-text {
            margin-top: 8px;
            font-size: 14px;
            opacity: 0.9;
        }

        .checklist {
            padding: 15px;
            flex: 1;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
        }

        .category {
            margin-bottom: 20px;
        }

        .category-title {
            font-size: 16px;
            font-weight: 600;
            color: #764ba2;
            margin-bottom: 10px;
            padding-bottom: 6px;
            border-bottom: 2px solid #f0f0f0;
        }

        .item {
            display: flex;
            align-items: center;
            padding: 10px;
            margin-bottom: 6px;
            background: #f8f9fa;
            border-radius: 10px;
            cursor: pointer;
            user-select: none;
        }

        .item.checked {
            background: #e8f5e9;
            opacity: 0.7;
        }

        .checkbox {
            width: 22px;
            height: 22px;
            border: 2px solid #667eea;
            border-radius: 6px;
            margin-right: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .item.checked .checkbox {
            background: #667eea;
            border-color: #667eea;
        }

        .checkbox::after {
            content: '‚úì';
            color: white;
            font-size: 14px;
            opacity: 0;
        }

        .item.checked .checkbox::after {
            opacity: 1;
        }

        .item-text {
            font-size: 15px;
            color: #333;
            flex: 1;
        }

        .item.checked .item-text {
            text-decoration: line-through;
            color: #666;
        }

        .item.important .item-text {
            font-weight: 600;
            color: #ff6b6b;
        }

        .footer {
            padding: 15px;
            background: #f8f9fa;
            border-top: 1px solid #e0e0e0;
            display: flex;
            gap: 10px;
            flex-shrink: 0;
        }

        .btn {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 10px;
            font-size: 15px;
            font-weight: 500;
            cursor: pointer;
            color: white;
        }

        .btn-clear {
            background: #ff6b6b;
        }

        .btn-sort {
            background: #4ecdc4;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <button class="lang-toggle" onclick="toggleLanguage()" id="langBtn">ET | EN</button>
            <h1 id="title">üìã Reisi checklist</h1>
            <div class="progress">
                <div class="progress-bar" id="progressBar"></div>
            </div>
            <div class="progress-text" id="progressText">0 / 0 m√§rgitud</div>
        </div>

        <div class="checklist" id="checklist"></div>

        <div class="footer">
            <button class="btn btn-clear" onclick="clearAll()" id="btnClear">üóëÔ∏è T√ºhjenda</button>
            <button class="btn btn-sort" onclick="refreshSort()" id="btnSort">üîÑ Sorteeri</button>
        </div>
    </div>

    <script>
        const translations = {
            et: {
                title: 'üìã Reisi checklist',
                progress: 'm√§rgitud',
                clear: 'üóëÔ∏è T√ºhjenda',
                sort: 'üîÑ Sorteeri',
                confirm: 'Oled kindel, et soovid k√µik m√§rgistused eemaldada?',
                todo: 'Tegemata',
                done: 'Tehtud',
                items: [
                    { category: 'Riided', items: ['Teksad + l√ºhikesed suvel', 'Alukad +4', 'Sokid x4', 'T-s√§rk x3', 'Pusa, kapsun x2', 'Pidulik s√§rk', 'Ujukad', 'Kaelus'] },
                    { category: 'Jalatsid', items: ['Pl√§tud', 'Saapad'] },
                    { category: 'Sport', items: ['Jooksutossud', 'Jooks sokid x2', 'Jooks sokid x3', 'Jooks m√ºts', 'Jooks Dressid x2', 'Jooks s√§rk x2', 'Jooks kampsun x1', 'Jooks kampsun x2', 'Jooks kilekas', 'Jooks k√µrvaklapid', 'Jooks pulss', 'Jooks Prillid'] },
                    { category: 'Talv', items: ['Lume jope', 'Lume p√ºksid', 'Lume kampsun', 'Lume mask', 'Lume pikad alukad', 'Lume alumine kiht x2', 'Lume sokid x2', 'Lume saapad', 'Lumeaud', 'Lume Kiiver', 'Lume kindad + tavakindad', 'Lume prillid', 'Suusam√§ekaartpilet'] },
                    { category: 'H√ºgieen', items: ['R√§tik', 'Habemeajamismasin', 'K√º√ºnek√§√§rid', 'P√§ikesekreem', 'Hambahari pasta', 'Huulepalsam'] },
                    { category: 'Ravimid', items: ['Peavalu', 'Vaseliin', 'Astma', 'Allergia'] },
                    { category: 'Dokumendid (T√§htis!)', items: ['ID-kaart !!! Pass', 'Juhiluba', 'Rahakott/kaardid', 'Reisikindlustus'] },
                    { category: 'Elektroonika', items: ['Telefon/Laadija', 'Arvuti/laadija+ kott', 'K√µrvaklapid', 'Pikendusjuhe + pistikuadapter', 'Kindle', 'GoPro'] },
                    { category: 'Muu', items: ['M√§ngukaardid', 'Seljakott', 'Joogitops', 'Survival blanket', 'Autovautser', 'Raamat', 'Raha'] }
                ]
            },
            en: {
                title: 'üìã Travel Checklist',
                progress: 'checked',
                clear: 'üóëÔ∏è Clear All',
                sort: 'üîÑ Sort',
                confirm: 'Are you sure you want to clear all checkmarks?',
                todo: 'To Do',
                done: 'Done',
                items: [
                    { category: 'Clothing', items: ['Jeans + shorts', 'Underwear +4', 'Socks x4', 'T-shirt x3', 'Sweater, hoodie x2', 'Dress shirt', 'Swimwear', 'Scarf'] },
                    { category: 'Footwear', items: ['Sneakers', 'Boots'] },
                    { category: 'Sports', items: ['Running shoes', 'Running socks x2', 'Running socks x3', 'Running hat', 'Running outfit x2', 'Running shirt x2', 'Running jacket x1', 'Running jacket x2', 'Running bag', 'Running headphones', 'Running HR monitor', 'Running glasses'] },
                    { category: 'Winter', items: ['Snow jacket', 'Snow pants', 'Snow sweater', 'Snow mask', 'Thermal underwear', 'Base layer x2', 'Winter socks x2', 'Winter boots', 'Snowboard', 'Helmet', 'Snow gloves + regular gloves', 'Snow goggles', 'Ski pass'] },
                    { category: 'Hygiene', items: ['Towel', 'Shaver', 'Nail clippers', 'Sunscreen', 'Toothbrush & paste', 'Lip balm'] },
                    { category: 'Medicine', items: ['Headache pills', 'Vaseline', 'Asthma meds', 'Allergy meds'] },
                    { category: 'Documents (Important!)', items: ['ID card !!! Passport', 'Driver\'s license', 'Wallet/cards', 'Travel insurance'] },
                    { category: 'Electronics', items: ['Phone/Charger', 'Computer/charger + bag', 'Headphones', 'Extension cord + adapter', 'Kindle', 'GoPro'] },
                    { category: 'Other', items: ['Playing cards', 'Backpack', 'Water bottle', 'Survival blanket', 'Car voucher', 'Book', 'Cash'] }
                ]
            }
        };

        let lang = localStorage.getItem('checklistLang') || 'et';
        let checkedItems = JSON.parse(localStorage.getItem('travelChecklist') || '{}');
        let isSorted = false;

        function toggleLanguage() {
            lang = lang === 'et' ? 'en' : 'et';
            localStorage.setItem('checklistLang', lang);
            document.documentElement.lang = lang;
            updateUI();
            isSorted ? refreshSort() : render();
            updateProgress();
        }

        function updateUI() {
            const t = translations[lang];
            document.getElementById('title').textContent = t.title;
            document.getElementById('btnClear').textContent = t.clear;
            document.getElementById('btnSort').textContent = t.sort;
            document.getElementById('langBtn').textContent = lang === 'et' ? 'ET | EN' : 'EN | ET';
        }

        function getItems() {
            return translations[lang].items;
        }

        function saveState() {
            localStorage.setItem('travelChecklist', JSON.stringify(checkedItems));
        }

        window.clearAll = function() {
            if (confirm(translations[lang].confirm)) {
                checkedItems = {};
                localStorage.removeItem('travelChecklist');
                isSorted = false;
                render();
                updateProgress();
            }
        }

        window.refreshSort = function() {
            isSorted = true;
            const el = document.getElementById('checklist');
            el.innerHTML = '';
            const items = getItems();
            const t = translations[lang];

            items.forEach(cat => {
                const unchecked = cat.items.filter(i => !checkedItems[`${cat.category}-${i}`]);
                if (unchecked.length) {
                    const div = document.createElement('div');
                    div.className = 'category';
                    div.innerHTML = `<div class="category-title">${cat.category} (${t.todo})</div>`;
                    unchecked.forEach(i => div.appendChild(createItem(cat.category, i, false)));
                    el.appendChild(div);
                }
            });

            items.forEach(cat => {
                const checked = cat.items.filter(i => checkedItems[`${cat.category}-${i}`]);
                if (checked.length) {
                    const div = document.createElement('div');
                    div.className = 'category';
                    div.innerHTML = `<div class="category-title">${cat.category} (${t.done})</div>`;
                    checked.forEach(i => div.appendChild(createItem(cat.category, i, true)));
                    el.appendChild(div);
                }
            });
        }

        function createItem(category, text, isChecked) {
            const div = document.createElement('div');
            div.className = 'item' + (isChecked ? ' checked' : '');
            if (text.includes('!!!') || category.includes('Dokumendid') || category.includes('Documents')) {
                div.classList.add('important');
            }
            div.onclick = () => toggleItem(`${category}-${text}`);
            div.innerHTML = `<div class="checkbox"></div><div class="item-text">${text}</div>`;
            return div;
        }

        function toggleItem(id) {
            checkedItems[id] ? delete checkedItems[id] : checkedItems[id] = true;
            saveState();
            isSorted ? refreshSort() : render();
            updateProgress();
        }

        function updateProgress() {
            const items = getItems();
            let total = 0, checked = 0;
            items.forEach(c => c.items.forEach(i => {
                total++;
                if (checkedItems[`${c.category}-${i}`]) checked++;
            }));
            document.getElementById('progressBar').style.width = (total ? checked / total * 100 : 0) + '%';
            document.getElementById('progressText').textContent = `${checked} / ${total} ${translations[lang].progress}`;
        }

        function render() {
            const el = document.getElementById('checklist');
            el.innerHTML = '';
            getItems().forEach(cat => {
                const div = document.createElement('div');
                div.className = 'category';
                div.innerHTML = `<div class="category-title">${cat.category}</div>`;
                cat.items.forEach(i => div.appendChild(createItem(cat.category, i, !!checkedItems[`${cat.category}-${i}`])));
                el.appendChild(div);
            });
        }

        document.documentElement.lang = lang;
        updateUI();
        render();
        updateProgress();
    </script>
</body>
</html>
